{"version":3,"sources":["/var/www/htdocs/github.timshomepage.net/animeclient/frontEndSrc/js/sw.js","/var/www/htdocs/github.timshomepage.net/animeclient/frontEndSrc/js/anime-client.js","/var/www/htdocs/github.timshomepage.net/animeclient/frontEndSrc/js/events.js","/var/www/htdocs/github.timshomepage.net/animeclient/frontEndSrc/js/session-check.js","/var/www/htdocs/github.timshomepage.net/animeclient/frontEndSrc/js/template-helpers.js","/var/www/htdocs/github.timshomepage.net/animeclient/frontEndSrc/js/anime.js","/var/www/htdocs/github.timshomepage.net/animeclient/frontEndSrc/js/manga.js"],"sourcesContent":["// Start the service worker, if you can\nif ('serviceWorker' in navigator) {\n\tnavigator.serviceWorker.register('/sw.js').then(reg => {\n\t\tconsole.log('Service worker registered', reg.scope);\n\t}).catch(error => {\n\t\tconsole.error('Failed to register service worker', error);\n\t});\n}","// -------------------------------------------------------------------------\n// ! Base\n// -------------------------------------------------------------------------\n\nconst matches = (elm, selector) => {\n\tlet m = (elm.document || elm.ownerDocument).querySelectorAll(selector);\n\tlet i = matches.length;\n\twhile (--i >= 0 && m.item(i) !== elm) {};\n\treturn i > -1;\n}\n\nconst AnimeClient = {\n\t/**\n\t * Placeholder function\n\t */\n\tnoop: () => {},\n\t/**\n\t * DOM selector\n\t *\n\t * @param {string} selector - The dom selector string\n\t * @param {Element} [context]\n\t * @return array of dom elements\n\t */\n\t$(selector, context = null) {\n\t\tif (typeof selector !== 'string') {\n\t\t\treturn selector;\n\t\t}\n\n\t\tcontext = (context !== null && context.nodeType === 1)\n\t\t\t? context\n\t\t\t: document;\n\n\t\tlet elements = [];\n\t\tif (selector.match(/^#([\\w]+$)/)) {\n\t\t\telements.push(document.getElementById(selector.split('#')[1]));\n\t\t} else {\n\t\t\telements = [].slice.apply(context.querySelectorAll(selector));\n\t\t}\n\n\t\treturn elements;\n\t},\n\t/**\n\t * Does the selector exist on the current page?\n\t *\n\t * @param {string} selector\n\t * @returns {boolean}\n\t */\n\thasElement (selector) {\n\t\treturn AnimeClient.$(selector).length > 0;\n\t},\n\t/**\n\t * Scroll to the top of the Page\n\t *\n\t * @return {void}\n\t */\n\tscrollToTop () {\n\t\tconst el = AnimeClient.$('header')[0];\n\t\tel.scrollIntoView(true);\n\t},\n\t/**\n\t * Hide the selected element\n\t *\n\t * @param  {string|Element|Element[]} sel - the selector of the element to hide\n\t * @return {void}\n\t */\n\thide (sel) {\n\t\tif (typeof sel === 'string') {\n\t\t\tsel = AnimeClient.$(sel);\n\t\t}\n\n\t\tif (Array.isArray(sel)) {\n\t\t\tsel.forEach(el => el.setAttribute('hidden', 'hidden'));\n\t\t} else {\n\t\t\tsel.setAttribute('hidden', 'hidden');\n\t\t}\n\t},\n\t/**\n\t * UnHide the selected element\n\t *\n\t * @param  {string|Element|Element[]} sel - the selector of the element to hide\n\t * @return {void}\n\t */\n\tshow (sel) {\n\t\tif (typeof sel === 'string') {\n\t\t\tsel = AnimeClient.$(sel);\n\t\t}\n\n\t\tif (Array.isArray(sel)) {\n\t\t\tsel.forEach(el => el.removeAttribute('hidden'));\n\t\t} else {\n\t\t\tsel.removeAttribute('hidden');\n\t\t}\n\t},\n\t/**\n\t * Display a message box\n\t *\n\t * @param  {string} type - message type: info, error, success\n\t * @param  {string} message - the message itself\n\t * @return {void}\n\t */\n\tshowMessage (type, message) {\n\t\tlet template =\n\t\t\t`<div class='message ${type}'>\n\t\t\t\t<span class='icon'></span>\n\t\t\t\t${message}\n\t\t\t\t<span class='close'></span>\n\t\t\t</div>`;\n\n\t\tlet sel = AnimeClient.$('.message');\n\t\tif (sel[0] !== undefined) {\n\t\t\tsel[0].remove();\n\t\t}\n\n\t\tAnimeClient.$('header')[0].insertAdjacentHTML('beforeend', template);\n\t},\n\t/**\n\t * Finds the closest parent element matching the passed selector\n\t *\n\t * @param  {Element} current - the current Element\n\t * @param  {string} parentSelector - selector for the parent element\n\t * @return {Element|null} - the parent element\n\t */\n\tclosestParent (current, parentSelector) {\n\t\tif (Element.prototype.closest !== undefined) {\n\t\t\treturn current.closest(parentSelector);\n\t\t}\n\n\t\twhile (current !== document.documentElement) {\n\t\t\tif (matches(current, parentSelector)) {\n\t\t\t\treturn current;\n\t\t\t}\n\n\t\t\tcurrent = current.parentElement;\n\t\t}\n\n\t\treturn null;\n\t},\n\t/**\n\t * Generate a full url from a relative path\n\t *\n\t * @param  {string} path - url path\n\t * @return {string} - full url\n\t */\n\turl (path) {\n\t\tlet uri = `//${document.location.host}`;\n\t\turi += (path.charAt(0) === '/') ? path : `/${path}`;\n\n\t\treturn uri;\n\t},\n\t/**\n\t * Throttle execution of a function\n\t *\n\t * @see https://remysharp.com/2010/07/21/throttling-function-calls\n\t * @see https://jsfiddle.net/jonathansampson/m7G64/\n\t * @param {Number} interval - the minimum throttle time in ms\n\t * @param {Function} fn - the function to throttle\n\t * @param {Object} [scope] - the 'this' object for the function\n\t * @return {Function}\n\t */\n\tthrottle (interval, fn, scope) {\n\t\tlet wait = false;\n\t\treturn function (...args) {\n\t\t\tconst context = scope || this;\n\n\t\t\tif ( ! wait) {\n\t\t\t\tfn.apply(context, args);\n\t\t\t\twait = true;\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\twait = false;\n\t\t\t\t}, interval);\n\t\t\t}\n\t\t};\n\t},\n};\n\n// -------------------------------------------------------------------------\n// ! Events\n// -------------------------------------------------------------------------\n\nfunction addEvent(sel, event, listener) {\n\t// Recurse!\n\tif (! event.match(/^([\\w\\-]+)$/)) {\n\t\tevent.split(' ').forEach((evt) => {\n\t\t\taddEvent(sel, evt, listener);\n\t\t});\n\t}\n\n\tsel.addEventListener(event, listener, false);\n}\n\nfunction delegateEvent(sel, target, event, listener) {\n\t// Attach the listener to the parent\n\taddEvent(sel, event, (e) => {\n\t\t// Get live version of the target selector\n\t\tAnimeClient.$(target, sel).forEach((element) => {\n\t\t\tif(e.target == element) {\n\t\t\t\tlistener.call(element, e);\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Add an event listener\n *\n * @param  {string|Element} sel - the parent selector to bind to\n * @param  {string} event - event name(s) to bind\n * @param  {string|Element|function} target - the element to directly bind the event to\n * @param  {function} [listener] - event listener callback\n * @return {void}\n */\nAnimeClient.on = (sel, event, target, listener) => {\n\tif (listener === undefined) {\n\t\tlistener = target;\n\t\tAnimeClient.$(sel).forEach((el) => {\n\t\t\taddEvent(el, event, listener);\n\t\t});\n\t} else {\n\t\tAnimeClient.$(sel).forEach((el) => {\n\t\t\tdelegateEvent(el, target, event, listener);\n\t\t});\n\t}\n};\n\n// -------------------------------------------------------------------------\n// ! Ajax\n// -------------------------------------------------------------------------\n\n/**\n * Url encoding for non-get requests\n *\n * @param data\n * @returns {string}\n * @private\n */\nfunction ajaxSerialize(data) {\n\tlet pairs = [];\n\n\tObject.keys(data).forEach((name) => {\n\t\tlet value = data[name].toString();\n\n\t\tname = encodeURIComponent(name);\n\t\tvalue = encodeURIComponent(value);\n\n\t\tpairs.push(`${name}=${value}`);\n\t});\n\n\treturn pairs.join('&');\n}\n\n/**\n * Make an ajax request\n *\n * Config:{\n * \tdata: // data to send with the request\n * \ttype: // http verb of the request, defaults to GET\n * \tsuccess: // success callback\n * \terror: // error callback\n * }\n *\n * @param  {string} url - the url to request\n * @param  {Object} config  - the configuration object\n * @return {XMLHttpRequest}\n */\nAnimeClient.ajax = (url, config) => {\n\t// Set some sane defaults\n\tconst defaultConfig = {\n\t\tdata: {},\n\t\ttype: 'GET',\n\t\tdataType: '',\n\t\tsuccess: AnimeClient.noop,\n\t\tmimeType: 'application/x-www-form-urlencoded',\n\t\terror: AnimeClient.noop\n\t}\n\n\tconfig = {\n\t\t...defaultConfig,\n\t\t...config,\n\t}\n\n\tlet request = new XMLHttpRequest();\n\tlet method = String(config.type).toUpperCase();\n\n\tif (method === 'GET') {\n\t\turl += (url.match(/\\?/))\n\t\t\t? ajaxSerialize(config.data)\n\t\t\t: `?${ajaxSerialize(config.data)}`;\n\t}\n\n\trequest.open(method, url);\n\n\trequest.onreadystatechange = () => {\n\t\tif (request.readyState === 4) {\n\t\t\tlet responseText = '';\n\n\t\t\tif (request.responseType === 'json') {\n\t\t\t\tresponseText = JSON.parse(request.responseText);\n\t\t\t} else {\n\t\t\t\tresponseText = request.responseText;\n\t\t\t}\n\n\t\t\tif (request.status > 299) {\n\t\t\t\tconfig.error.call(null, request.status, responseText, request.response);\n\t\t\t} else {\n\t\t\t\tconfig.success.call(null, responseText, request.status);\n\t\t\t}\n\t\t}\n\t};\n\n\tif (config.dataType === 'json') {\n\t\tconfig.data = JSON.stringify(config.data);\n\t\tconfig.mimeType = 'application/json';\n\t} else {\n\t\tconfig.data = ajaxSerialize(config.data);\n\t}\n\n\trequest.setRequestHeader('Content-Type', config.mimeType);\n\n\tif (method === 'GET') {\n\t\trequest.send(null);\n\t} else {\n\t\trequest.send(config.data);\n\t}\n\n\treturn request\n};\n\n/**\n * Do a get request\n *\n * @param {string} url\n * @param {object|function} data\n * @param {function} [callback]\n * @return {XMLHttpRequest}\n */\nAnimeClient.get = (url, data, callback = null) => {\n\tif (callback === null) {\n\t\tcallback = data;\n\t\tdata = {};\n\t}\n\n\treturn AnimeClient.ajax(url, {\n\t\tdata,\n\t\tsuccess: callback\n\t});\n};\n\n// -------------------------------------------------------------------------\n// Export\n// -------------------------------------------------------------------------\n\nexport default AnimeClient;","import _ from './anime-client.js';\n\n// ----------------------------------------------------------------------------\n// Event subscriptions\n// ----------------------------------------------------------------------------\n_.on('header', 'click', '.message', hide);\n_.on('form.js-delete', 'submit', confirmDelete);\n_.on('.js-clear-cache', 'click', clearAPICache);\n_.on('.vertical-tabs input', 'change', scrollToSection);\n_.on('.media-filter', 'input', filterMedia);\n\n// ----------------------------------------------------------------------------\n// Handler functions\n// ----------------------------------------------------------------------------\n\n/**\n * Hide the html element attached to the event\n *\n * @param {MouseEvent} event\n * @return void\n */\nfunction hide (event) {\n\t_.hide(event.target)\n}\n\n/**\n * Confirm deletion of an item\n *\n * @param {MouseEvent} event\n * @return void\n */\nfunction confirmDelete (event) {\n\tconst proceed = confirm('Are you ABSOLUTELY SURE you want to delete this item?');\n\n\tif (proceed === false) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t}\n}\n\n/**\n * Clear the API cache, and show a message if the cache is cleared\n *\n * @return void\n */\nfunction clearAPICache () {\n\t_.get('/cache_purge', () => {\n\t\t_.showMessage('success', 'Successfully purged api cache');\n\t});\n}\n\n/**\n * Scroll to the accordion/vertical tab section just opened\n *\n * @param {InputEvent} event\n * @return void\n */\nfunction scrollToSection (event) {\n\tconst el = event.currentTarget.parentElement;\n\tconst rect = el.getBoundingClientRect();\n\n\tconst top = rect.top + window.pageYOffset;\n\n\twindow.scrollTo({\n\t\ttop,\n\t\tbehavior: 'smooth',\n\t});\n}\n\n/**\n * Filter an anime or manga list\n *\n * @param {InputEvent} event\n * @return void\n */\nfunction filterMedia (event) {\n\tconst rawFilter = event.target.value;\n\tconst filter = new RegExp(rawFilter, 'i');\n\n\t// console.log('Filtering items by: ', filter);\n\n\tif (rawFilter !== '') {\n\t\t// Filter the cover view\n\t\t_.$('article.media').forEach(article => {\n\t\t\tconst titleLink = _.$('.name a', article)[0];\n\t\t\tconst title = String(titleLink.textContent).trim();\n\t\t\tif ( ! filter.test(title)) {\n\t\t\t\t_.hide(article);\n\t\t\t} else {\n\t\t\t\t_.show(article);\n\t\t\t}\n\t\t});\n\n\t\t// Filter the list view\n\t\t_.$('table.media-wrap tbody tr').forEach(tr => {\n\t\t\tconst titleCell = _.$('td.align-left', tr)[0];\n\t\t\tconst titleLink = _.$('a', titleCell)[0];\n\t\t\tconst linkTitle = String(titleLink.textContent).trim();\n\t\t\tconst textTitle = String(titleCell.textContent).trim();\n\t\t\tif ( ! (filter.test(linkTitle) || filter.test(textTitle))) {\n\t\t\t\t_.hide(tr);\n\t\t\t} else {\n\t\t\t\t_.show(tr);\n\t\t\t}\n\t\t});\n\t} else {\n\t\t_.show('article.media');\n\t\t_.show('table.media-wrap tbody tr');\n\t}\n}\n","import _ from './anime-client.js';\n\n(() => {\n\tlet hidden = null;\n\tlet visibilityChange = null;\n\n\tif (typeof document.hidden !== \"undefined\") {\n\t\thidden = \"hidden\";\n\t\tvisibilityChange = \"visibilitychange\";\n\t} else if (typeof document.msHidden !== \"undefined\") {\n\t\thidden = \"msHidden\";\n\t\tvisibilityChange = \"msvisibilitychange\";\n\t} else if (typeof document.webkitHidden !== \"undefined\") {\n\t\thidden = \"webkitHidden\";\n\t\tvisibilityChange = \"webkitvisibilitychange\";\n\t}\n\n\tfunction handleVisibilityChange() {\n\t\t// Check the user's session to see if they are currently logged-in\n\t\t// when the page becomes visible\n\t\tif ( ! document[hidden]) {\n\t\t\t_.get('/heartbeat', (beat) => {\n\t\t\t\tconst status = JSON.parse(beat)\n\n\t\t\t\t// If the session is expired, immediately reload so that\n\t\t\t\t// you can't attempt to do an action that requires authentication\n\t\t\t\tif (status.hasAuth !== true) {\n\t\t\t\t\tdocument.removeEventListener(visibilityChange, handleVisibilityChange, false);\n\t\t\t\t\tlocation.reload();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tif (hidden === null) {\n\t\tconsole.info('Page visibility API not supported, JS session check will not work');\n\t} else {\n\t\tdocument.addEventListener(visibilityChange, handleVisibilityChange, false);\n\t}\n})();","import _ from './anime-client.js';\n\n// Click on hidden MAL checkbox so\n// that MAL id is passed\n_.on('main', 'change', '.big-check', (e) => {\n\tconst id = e.target.id;\n\tdocument.getElementById(`mal_${id}`).checked = true;\n});\n\nexport function renderAnimeSearchResults (data) {\n\treturn data.map(item => {\n\t\tconst titles = item.titles.join('<br />');\n\n\t\treturn `\n\t\t\t<article class=\"media search\">\n\t\t\t\t<div class=\"name\">\n\t\t\t\t\t<input type=\"radio\" class=\"mal-check\" id=\"mal_${item.slug}\" name=\"mal_id\" value=\"${item.mal_id}\" />\n\t\t\t\t\t<input type=\"radio\" class=\"big-check\" id=\"${item.slug}\" name=\"id\" value=\"${item.id}\" />\n\t\t\t\t\t<label for=\"${item.slug}\">\n\t\t\t\t\t\t<picture width=\"220\">\n\t\t\t\t\t\t\t<source srcset=\"/public/images/anime/${item.id}.webp\" type=\"image/webp\" />\n\t\t\t\t\t\t\t<source srcset=\"/public/images/anime/${item.id}.jpg\" type=\"image/jpeg\" />\n\t\t\t\t\t\t\t<img src=\"/public/images/anime/${item.id}.jpg\" alt=\"\" width=\"220\" />\n\t\t\t\t\t\t</picture>\n\t\t\t\t\t\t<span class=\"name\">\n\t\t\t\t\t\t\t${item.canonicalTitle}<br />\n\t\t\t\t\t\t\t<small>${titles}</small>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"table\">\n\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t<span class=\"edit\">\n\t\t\t\t\t\t\t<a class=\"bracketed\" href=\"/anime/details/${item.slug}\">Info Page</a>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</article>\n\t\t`;\n\t}).join('');\n}\n\nexport function renderMangaSearchResults (data) {\n\treturn data.map(item => {\n\t\tconst titles = item.titles.join('<br />');\n\t\treturn `\n\t\t\t<article class=\"media search\">\n\t\t\t\t<div class=\"name\">\n\t\t\t\t\t<input type=\"radio\" id=\"mal_${item.slug}\" name=\"mal_id\" value=\"${item.mal_id}\" />\n\t\t\t\t\t<input type=\"radio\" class=\"big-check\" id=\"${item.slug}\" name=\"id\" value=\"${item.id}\" />\n\t\t\t\t\t<label for=\"${item.slug}\">\n\t\t\t\t\t\t<picture width=\"220\">\n\t\t\t\t\t\t\t<source srcset=\"/public/images/manga/${item.id}.webp\" type=\"image/webp\" />\n\t\t\t\t\t\t\t<source srcset=\"/public/images/manga/${item.id}.jpg\" type=\"image/jpeg\" />\n\t\t\t\t\t\t\t<img src=\"/public/images/manga/${item.id}.jpg\" alt=\"\" width=\"220\" />\n\t\t\t\t\t\t</picture>\n\t\t\t\t\t\t<span class=\"name\">\n\t\t\t\t\t\t\t${item.canonicalTitle}<br />\n\t\t\t\t\t\t\t<small>${titles}</small>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"table\">\n\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t<span class=\"edit\">\n\t\t\t\t\t\t\t<a class=\"bracketed\" href=\"/manga/details/${item.slug}\">Info Page</a>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</article>\n\t\t`;\n\t}).join('');\n}","import _ from './anime-client.js'\nimport { renderAnimeSearchResults } from './template-helpers.js'\n\nconst search = (query) => {\n\t// Show the loader\n\t_.show('.cssload-loader');\n\n\t// Do the api search\n\treturn _.get(_.url('/anime-collection/search'), { query }, (searchResults, status) => {\n\t\tsearchResults = JSON.parse(searchResults);\n\n\t\t// Hide the loader\n\t\t_.hide('.cssload-loader');\n\n\t\t// Show the results\n\t\t_.$('#series-list')[ 0 ].innerHTML = renderAnimeSearchResults(searchResults);\n\t});\n};\n\nif (_.hasElement('.anime #search')) {\n\tlet prevRequest = null;\n\n\t_.on('#search', 'input', _.throttle(250, (e) => {\n\t\tconst query = encodeURIComponent(e.target.value);\n\t\tif (query === '') {\n\t\t\treturn;\n\t\t}\n\n\t\tif (prevRequest !== null) {\n\t\t\tprevRequest.abort();\n\t\t}\n\n\t\tprevRequest = search(query);\n\t}));\n}\n\n// Action to increment episode count\n_.on('body.anime.list', 'click', '.plus-one', (e) => {\n\tlet parentSel = _.closestParent(e.target, 'article');\n\tlet watchedCount = parseInt(_.$('.completed_number', parentSel)[ 0 ].textContent, 10) || 0;\n\tlet totalCount = parseInt(_.$('.total_number', parentSel)[ 0 ].textContent, 10);\n\tlet title = _.$('.name a', parentSel)[ 0 ].textContent;\n\n\t// Setup the update data\n\tlet data = {\n\t\tid: parentSel.dataset.kitsuId,\n\t\tmal_id: parentSel.dataset.malId,\n\t\tdata: {\n\t\t\tprogress: watchedCount + 1\n\t\t}\n\t};\n\n\t// If the episode count is 0, and incremented,\n\t// change status to currently watching\n\tif (isNaN(watchedCount) || watchedCount === 0) {\n\t\tdata.data.status = 'CURRENT';\n\t}\n\n\t// If you increment at the last episode, mark as completed\n\tif ((!isNaN(watchedCount)) && (watchedCount + 1) === totalCount) {\n\t\tdata.data.status = 'COMPLETED';\n\t}\n\n\t_.show('#loading-shadow');\n\n\t// okay, lets actually make some changes!\n\t_.ajax(_.url('/anime/increment'), {\n\t\tdata,\n\t\tdataType: 'json',\n\t\ttype: 'POST',\n\t\tsuccess: (res) => {\n\t\t\tconst resData = JSON.parse(res);\n\n\t\t\tif (resData.error) {\n\t\t\t\t_.hide('#loading-shadow');\n\t\t\t\t_.showMessage('error', `Failed to update ${title}. `);\n\t\t\t\t_.scrollToTop();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (resData.data.libraryEntry.update.libraryEntry.status === 'COMPLETED') {\n\t\t\t\t_.hide(parentSel);\n\t\t\t}\n\n\t\t\t_.hide('#loading-shadow');\n\n\t\t\t_.showMessage('success', `Successfully updated ${title}`);\n\t\t\t_.$('.completed_number', parentSel)[ 0 ].textContent = ++watchedCount;\n\t\t\t_.scrollToTop();\n\t\t},\n\t\terror: () => {\n\t\t\t_.hide('#loading-shadow');\n\t\t\t_.showMessage('error', `Failed to update ${title}. `);\n\t\t\t_.scrollToTop();\n\t\t}\n\t});\n});","import _ from './anime-client.js'\nimport { renderMangaSearchResults } from './template-helpers.js'\n\nconst search = (query) => {\n\t_.show('.cssload-loader');\n\treturn _.get(_.url('/manga/search'), { query }, (searchResults, status) => {\n\t\tsearchResults = JSON.parse(searchResults);\n\t\t_.hide('.cssload-loader');\n\t\t_.$('#series-list')[ 0 ].innerHTML = renderMangaSearchResults(searchResults);\n\t});\n};\n\nif (_.hasElement('.manga #search')) {\n\tlet prevRequest = null\n\n\t_.on('#search', 'input', _.throttle(250, (e) => {\n\t\tlet query = encodeURIComponent(e.target.value);\n\t\tif (query === '') {\n\t\t\treturn;\n\t\t}\n\n\t\tif (prevRequest !== null) {\n\t\t\tprevRequest.abort();\n\t\t}\n\n\t\tprevRequest = search(query);\n\t}));\n}\n\n/**\n * Javascript for editing manga, if logged in\n */\n_.on('.manga.list', 'click', '.edit-buttons button', (e) => {\n\tlet thisSel = e.target;\n\tlet parentSel = _.closestParent(e.target, 'article');\n\tlet type = thisSel.classList.contains('plus-one-chapter') ? 'chapter' : 'volume';\n\tlet completed = parseInt(_.$(`.${type}s_read`, parentSel)[ 0 ].textContent, 10) || 0;\n\tlet total = parseInt(_.$(`.${type}_count`, parentSel)[ 0 ].textContent, 10);\n\tlet mangaName = _.$('.name', parentSel)[ 0 ].textContent;\n\n\tif (isNaN(completed)) {\n\t\tcompleted = 0;\n\t}\n\n\t// Setup the update data\n\tlet data = {\n\t\tid: parentSel.dataset.kitsuId,\n\t\tmal_id: parentSel.dataset.malId,\n\t\tdata: {\n\t\t\tprogress: completed\n\t\t}\n\t};\n\n\t// If the episode count is 0, and incremented,\n\t// change status to currently reading\n\tif (isNaN(completed) || completed === 0) {\n\t\tdata.data.status = 'CURRENT';\n\t}\n\n\t// If you increment at the last chapter, mark as completed\n\tif ((!isNaN(completed)) && (completed + 1) === total) {\n\t\tdata.data.status = 'COMPLETED';\n\t}\n\n\t// Update the total count\n\tdata.data.progress = ++completed;\n\n\t_.show('#loading-shadow');\n\n\t_.ajax(_.url('/manga/increment'), {\n\t\tdata,\n\t\tdataType: 'json',\n\t\ttype: 'POST',\n\t\tmimeType: 'application/json',\n\t\tsuccess: (res) => {\n\t\t\tconst resData = JSON.parse(res)\n\t\t\tif (resData.error) {\n\t\t\t\t_.hide('#loading-shadow');\n\t\t\t\t_.showMessage('error', `Failed to update ${mangaName}. `);\n\t\t\t\t_.scrollToTop();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (String(data.data.status).toUpperCase() === 'COMPLETED') {\n\t\t\t\t_.hide(parentSel);\n\t\t\t}\n\n\t\t\t_.hide('#loading-shadow');\n\n\t\t\t_.$(`.${type}s_read`, parentSel)[ 0 ].textContent = String(completed);\n\t\t\t_.showMessage('success', `Successfully updated ${mangaName}`);\n\t\t\t_.scrollToTop();\n\t\t},\n\t\terror: () => {\n\t\t\t_.hide('#loading-shadow');\n\t\t\t_.showMessage('error', `Failed to update ${mangaName}`);\n\t\t\t_.scrollToTop();\n\t\t}\n\t});\n});"],"names":[],"mappings":"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"}