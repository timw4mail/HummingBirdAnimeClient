{"version":3,"sources":["/var/www/htdocs/github.timshomepage.net/animeclient/frontEndSrc/js/sw.js","/var/www/htdocs/github.timshomepage.net/animeclient/frontEndSrc/js/anime-client.js","/var/www/htdocs/github.timshomepage.net/animeclient/frontEndSrc/js/events.js","/var/www/htdocs/github.timshomepage.net/animeclient/frontEndSrc/js/session-check.js","/var/www/htdocs/github.timshomepage.net/animeclient/frontEndSrc/js/template-helpers.js","/var/www/htdocs/github.timshomepage.net/animeclient/frontEndSrc/js/anime.js","/var/www/htdocs/github.timshomepage.net/animeclient/frontEndSrc/js/manga.js"],"sourcesContent":["// Start the service worker, if you can\nif ('serviceWorker' in navigator) {\n\tnavigator.serviceWorker.register('/sw.js').then(reg => {\n\t\tconsole.log('Service worker registered', reg.scope);\n\t}).catch(error => {\n\t\tconsole.error('Failed to register service worker', error);\n\t});\n}","// -------------------------------------------------------------------------\n// ! Base\n// -------------------------------------------------------------------------\n\nconst matches = (elm, selector) => {\n\tlet m = (elm.document || elm.ownerDocument).querySelectorAll(selector);\n\tlet i = matches.length;\n\twhile (--i >= 0 && m.item(i) !== elm) {};\n\treturn i > -1;\n}\n\nconst AnimeClient = {\n\t/**\n\t * Placeholder function\n\t */\n\tnoop: () => {},\n\t/**\n\t * DOM selector\n\t *\n\t * @param {string} selector - The dom selector string\n\t * @param {Element} [context]\n\t * @return array of dom elements\n\t */\n\t$(selector, context = null) {\n\t\tif (typeof selector !== 'string') {\n\t\t\treturn selector;\n\t\t}\n\n\t\tcontext = (context !== null && context.nodeType === 1)\n\t\t\t? context\n\t\t\t: document;\n\n\t\tlet elements = [];\n\t\tif (selector.match(/^#([\\w]+$)/)) {\n\t\t\telements.push(document.getElementById(selector.split('#')[1]));\n\t\t} else {\n\t\t\telements = [].slice.apply(context.querySelectorAll(selector));\n\t\t}\n\n\t\treturn elements;\n\t},\n\t/**\n\t * Does the selector exist on the current page?\n\t *\n\t * @param {string} selector\n\t * @returns {boolean}\n\t */\n\thasElement (selector) {\n\t\treturn AnimeClient.$(selector).length > 0;\n\t},\n\t/**\n\t * Scroll to the top of the Page\n\t *\n\t * @return {void}\n\t */\n\tscrollToTop () {\n\t\tconst el = AnimeClient.$('header')[0];\n\t\tel.scrollIntoView(true);\n\t},\n\t/**\n\t * Hide the selected element\n\t *\n\t * @param  {string|Element|Element[]} sel - the selector of the element to hide\n\t * @return {void}\n\t */\n\thide (sel) {\n\t\tif (typeof sel === 'string') {\n\t\t\tsel = AnimeClient.$(sel);\n\t\t}\n\n\t\tif (Array.isArray(sel)) {\n\t\t\tsel.forEach(el => el.setAttribute('hidden', 'hidden'));\n\t\t} else {\n\t\t\tsel.setAttribute('hidden', 'hidden');\n\t\t}\n\t},\n\t/**\n\t * UnHide the selected element\n\t *\n\t * @param  {string|Element|Element[]} sel - the selector of the element to hide\n\t * @return {void}\n\t */\n\tshow (sel) {\n\t\tif (typeof sel === 'string') {\n\t\t\tsel = AnimeClient.$(sel);\n\t\t}\n\n\t\tif (Array.isArray(sel)) {\n\t\t\tsel.forEach(el => el.removeAttribute('hidden'));\n\t\t} else {\n\t\t\tsel.removeAttribute('hidden');\n\t\t}\n\t},\n\t/**\n\t * Display a message box\n\t *\n\t * @param  {string} type - message type: info, error, success\n\t * @param  {string} message - the message itself\n\t * @return {void}\n\t */\n\tshowMessage (type, message) {\n\t\tlet template =\n\t\t\t`<div class='message ${type}'>\n\t\t\t\t<span class='icon'></span>\n\t\t\t\t${message}\n\t\t\t\t<span class='close'></span>\n\t\t\t</div>`;\n\n\t\tlet sel = AnimeClient.$('.message');\n\t\tif (sel[0] !== undefined) {\n\t\t\tsel[0].remove();\n\t\t}\n\n\t\tAnimeClient.$('header')[0].insertAdjacentHTML('beforeend', template);\n\t},\n\t/**\n\t * Finds the closest parent element matching the passed selector\n\t *\n\t * @param  {Element} current - the current Element\n\t * @param  {string} parentSelector - selector for the parent element\n\t * @return {Element|null} - the parent element\n\t */\n\tclosestParent (current, parentSelector) {\n\t\tif (Element.prototype.closest !== undefined) {\n\t\t\treturn current.closest(parentSelector);\n\t\t}\n\n\t\twhile (current !== document.documentElement) {\n\t\t\tif (matches(current, parentSelector)) {\n\t\t\t\treturn current;\n\t\t\t}\n\n\t\t\tcurrent = current.parentElement;\n\t\t}\n\n\t\treturn null;\n\t},\n\t/**\n\t * Generate a full url from a relative path\n\t *\n\t * @param  {string} path - url path\n\t * @return {string} - full url\n\t */\n\turl (path) {\n\t\tlet uri = `//${document.location.host}`;\n\t\turi += (path.charAt(0) === '/') ? path : `/${path}`;\n\n\t\treturn uri;\n\t},\n\t/**\n\t * Throttle execution of a function\n\t *\n\t * @see https://remysharp.com/2010/07/21/throttling-function-calls\n\t * @see https://jsfiddle.net/jonathansampson/m7G64/\n\t * @param {Number} interval - the minimum throttle time in ms\n\t * @param {Function} fn - the function to throttle\n\t * @param {Object} [scope] - the 'this' object for the function\n\t * @return {Function}\n\t */\n\tthrottle (interval, fn, scope) {\n\t\tlet wait = false;\n\t\treturn function (...args) {\n\t\t\tconst context = scope || this;\n\n\t\t\tif ( ! wait) {\n\t\t\t\tfn.apply(context, args);\n\t\t\t\twait = true;\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\twait = false;\n\t\t\t\t}, interval);\n\t\t\t}\n\t\t};\n\t},\n};\n\n// -------------------------------------------------------------------------\n// ! Events\n// -------------------------------------------------------------------------\n\nfunction addEvent(sel, event, listener) {\n\t// Recurse!\n\tif (! event.match(/^([\\w\\-]+)$/)) {\n\t\tevent.split(' ').forEach((evt) => {\n\t\t\taddEvent(sel, evt, listener);\n\t\t});\n\t}\n\n\tsel.addEventListener(event, listener, false);\n}\n\nfunction delegateEvent(sel, target, event, listener) {\n\t// Attach the listener to the parent\n\taddEvent(sel, event, (e) => {\n\t\t// Get live version of the target selector\n\t\tAnimeClient.$(target, sel).forEach((element) => {\n\t\t\tif(e.target == element) {\n\t\t\t\tlistener.call(element, e);\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Add an event listener\n *\n * @param  {string|Element} sel - the parent selector to bind to\n * @param  {string} event - event name(s) to bind\n * @param  {string|Element|function} target - the element to directly bind the event to\n * @param  {function} [listener] - event listener callback\n * @return {void}\n */\nAnimeClient.on = (sel, event, target, listener) => {\n\tif (listener === undefined) {\n\t\tlistener = target;\n\t\tAnimeClient.$(sel).forEach((el) => {\n\t\t\taddEvent(el, event, listener);\n\t\t});\n\t} else {\n\t\tAnimeClient.$(sel).forEach((el) => {\n\t\t\tdelegateEvent(el, target, event, listener);\n\t\t});\n\t}\n};\n\n// -------------------------------------------------------------------------\n// ! Ajax\n// -------------------------------------------------------------------------\n\n/**\n * Url encoding for non-get requests\n *\n * @param data\n * @returns {string}\n * @private\n */\nfunction ajaxSerialize(data) {\n\tlet pairs = [];\n\n\tObject.keys(data).forEach((name) => {\n\t\tlet value = data[name].toString();\n\n\t\tname = encodeURIComponent(name);\n\t\tvalue = encodeURIComponent(value);\n\n\t\tpairs.push(`${name}=${value}`);\n\t});\n\n\treturn pairs.join('&');\n}\n\n/**\n * Make an ajax request\n *\n * Config:{\n * \tdata: // data to send with the request\n * \ttype: // http verb of the request, defaults to GET\n * \tsuccess: // success callback\n * \terror: // error callback\n * }\n *\n * @param  {string} url - the url to request\n * @param  {Object} config  - the configuration object\n * @return {XMLHttpRequest}\n */\nAnimeClient.ajax = (url, config) => {\n\t// Set some sane defaults\n\tconst defaultConfig = {\n\t\tdata: {},\n\t\ttype: 'GET',\n\t\tdataType: '',\n\t\tsuccess: AnimeClient.noop,\n\t\tmimeType: 'application/x-www-form-urlencoded',\n\t\terror: AnimeClient.noop\n\t}\n\n\tconfig = {\n\t\t...defaultConfig,\n\t\t...config,\n\t}\n\n\tlet request = new XMLHttpRequest();\n\tlet method = String(config.type).toUpperCase();\n\n\tif (method === 'GET') {\n\t\turl += (url.match(/\\?/))\n\t\t\t? ajaxSerialize(config.data)\n\t\t\t: `?${ajaxSerialize(config.data)}`;\n\t}\n\n\trequest.open(method, url);\n\n\trequest.onreadystatechange = () => {\n\t\tif (request.readyState === 4) {\n\t\t\tlet responseText = '';\n\n\t\t\tif (request.responseType === 'json') {\n\t\t\t\tresponseText = JSON.parse(request.responseText);\n\t\t\t} else {\n\t\t\t\tresponseText = request.responseText;\n\t\t\t}\n\n\t\t\tif (request.status > 299) {\n\t\t\t\tconfig.error.call(null, request.status, responseText, request.response);\n\t\t\t} else {\n\t\t\t\tconfig.success.call(null, responseText, request.status);\n\t\t\t}\n\t\t}\n\t};\n\n\tif (config.dataType === 'json') {\n\t\tconfig.data = JSON.stringify(config.data);\n\t\tconfig.mimeType = 'application/json';\n\t} else {\n\t\tconfig.data = ajaxSerialize(config.data);\n\t}\n\n\trequest.setRequestHeader('Content-Type', config.mimeType);\n\n\tif (method === 'GET') {\n\t\trequest.send(null);\n\t} else {\n\t\trequest.send(config.data);\n\t}\n\n\treturn request\n};\n\n/**\n * Do a get request\n *\n * @param {string} url\n * @param {object|function} data\n * @param {function} [callback]\n * @return {XMLHttpRequest}\n */\nAnimeClient.get = (url, data, callback = null) => {\n\tif (callback === null) {\n\t\tcallback = data;\n\t\tdata = {};\n\t}\n\n\treturn AnimeClient.ajax(url, {\n\t\tdata,\n\t\tsuccess: callback\n\t});\n};\n\n// -------------------------------------------------------------------------\n// Export\n// -------------------------------------------------------------------------\n\nexport default AnimeClient;","import _ from './anime-client.js';\n\n// ----------------------------------------------------------------------------\n// Event subscriptions\n// ----------------------------------------------------------------------------\n_.on('header', 'click', '.message', hide);\n_.on('form.js-delete', 'submit', confirmDelete);\n_.on('.js-clear-cache', 'click', clearAPICache);\n_.on('.vertical-tabs input', 'change', scrollToSection);\n_.on('.media-filter', 'input', filterMedia);\n\n// ----------------------------------------------------------------------------\n// Handler functions\n// ----------------------------------------------------------------------------\n\n/**\n * Hide the html element attached to the event\n *\n * @param {MouseEvent} event\n * @return void\n */\nfunction hide (event) {\n\t_.hide(event.target)\n}\n\n/**\n * Confirm deletion of an item\n *\n * @param {MouseEvent} event\n * @return void\n */\nfunction confirmDelete (event) {\n\tconst proceed = confirm('Are you ABSOLUTELY SURE you want to delete this item?');\n\n\tif (proceed === false) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t}\n}\n\n/**\n * Clear the API cache, and show a message if the cache is cleared\n *\n * @return void\n */\nfunction clearAPICache () {\n\t_.get('/cache_purge', () => {\n\t\t_.showMessage('success', 'Successfully purged api cache');\n\t});\n}\n\n/**\n * Scroll to the accordion/vertical tab section just opened\n *\n * @param {InputEvent} event\n * @return void\n */\nfunction scrollToSection (event) {\n\tconst el = event.currentTarget.parentElement;\n\tconst rect = el.getBoundingClientRect();\n\n\tconst top = rect.top + window.pageYOffset;\n\n\twindow.scrollTo({\n\t\ttop,\n\t\tbehavior: 'smooth',\n\t});\n}\n\n/**\n * Filter an anime or manga list\n *\n * @param {InputEvent} event\n * @return void\n */\nfunction filterMedia (event) {\n\tconst rawFilter = event.target.value;\n\tconst filter = new RegExp(rawFilter, 'i');\n\n\t// console.log('Filtering items by: ', filter);\n\n\tif (rawFilter !== '') {\n\t\t// Filter the cover view\n\t\t_.$('article.media').forEach(article => {\n\t\t\tconst titleLink = _.$('.name a', article)[0];\n\t\t\tconst title = String(titleLink.textContent).trim();\n\t\t\tif ( ! filter.test(title)) {\n\t\t\t\t_.hide(article);\n\t\t\t} else {\n\t\t\t\t_.show(article);\n\t\t\t}\n\t\t});\n\n\t\t// Filter the list view\n\t\t_.$('table.media-wrap tbody tr').forEach(tr => {\n\t\t\tconst titleCell = _.$('td.align-left', tr)[0];\n\t\t\tconst titleLink = _.$('a', titleCell)[0];\n\t\t\tconst linkTitle = String(titleLink.textContent).trim();\n\t\t\tconst textTitle = String(titleCell.textContent).trim();\n\t\t\tif ( ! (filter.test(linkTitle) || filter.test(textTitle))) {\n\t\t\t\t_.hide(tr);\n\t\t\t} else {\n\t\t\t\t_.show(tr);\n\t\t\t}\n\t\t});\n\t} else {\n\t\t_.show('article.media');\n\t\t_.show('table.media-wrap tbody tr');\n\t}\n}\n","import _ from './anime-client.js';\n\n(() => {\n\tlet hidden = null;\n\tlet visibilityChange = null;\n\n\tif (typeof document.hidden !== \"undefined\") {\n\t\thidden = \"hidden\";\n\t\tvisibilityChange = \"visibilitychange\";\n\t} else if (typeof document.msHidden !== \"undefined\") {\n\t\thidden = \"msHidden\";\n\t\tvisibilityChange = \"msvisibilitychange\";\n\t} else if (typeof document.webkitHidden !== \"undefined\") {\n\t\thidden = \"webkitHidden\";\n\t\tvisibilityChange = \"webkitvisibilitychange\";\n\t}\n\n\tfunction handleVisibilityChange() {\n\t\t// Check the user's session to see if they are currently logged-in\n\t\t// when the page becomes visible\n\t\tif ( ! document[hidden]) {\n\t\t\t_.get('/heartbeat', (beat) => {\n\t\t\t\tconst status = JSON.parse(beat)\n\n\t\t\t\t// If the session is expired, immediately reload so that\n\t\t\t\t// you can't attempt to do an action that requires authentication\n\t\t\t\tif (status.hasAuth !== true) {\n\t\t\t\t\tdocument.removeEventListener(visibilityChange, handleVisibilityChange, false);\n\t\t\t\t\tlocation.reload();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tif (hidden === null) {\n\t\tconsole.info('Page visibility API not supported, JS session check will not work');\n\t} else {\n\t\tdocument.addEventListener(visibilityChange, handleVisibilityChange, false);\n\t}\n})();","import _ from './anime-client.js';\n\n// Click on hidden MAL checkbox so\n// that MAL id is passed\n_.on('main', 'change', '.big-check', (e) => {\n\tconst id = e.target.id;\n\tdocument.getElementById(`mal_${id}`).checked = true;\n});\n\n/**\n * On search results with an existing library entry, this shows that fact, with an edit link for the existing\n * library entry\n *\n * @param {'anime'|'manga'} type\n * @param {Object} item\n * @param isCollection\n * @returns {String}\n */\nfunction renderEditLink (type, item, isCollection = false) {\n\tif (isCollection || item.libraryEntry === null) {\n\t\treturn '';\n\t}\n\n\treturn `\n\t\t<div class=\"row\">\n\t\t\t<span class=\"edit\"><big>[ Already in List ]</big></span>\n\t\t</div>\n\t\t<div class=\"row\">\n\t\t\t<span class=\"edit\">\n\t\t\t\t<a class=\"bracketed\" href=\"/${type}/edit/${item.libraryEntry.id}/${item.libraryEntry.status}\">Edit</a>\n\t\t\t</span>\n\t\t</div>\n\t\t<div class=\"row\"><span class=\"edit\">&nbsp;</span></div>\n\t`\n}\n\n/**\n * Show the search results for a media item\n *\n * @param {'anime'|'manga'} type\n * @param {Object} data\n * @param {boolean} isCollection\n * @returns {String}\n */\nexport function renderSearchResults (type, data, isCollection = false) {\n\treturn data.map(item => {\n\t\tconst titles = item.titles.join('<br />');\n\t\tlet disabled = item.libraryEntry !== null ? 'disabled' : '';\n\t\tconst editLink = renderEditLink(type, item, isCollection);\n\n\t\tif (isCollection) {\n\t\t\tdisabled = '';\n\t\t}\n\n\t\treturn `\n\t\t\t<article class=\"media search ${disabled}\">\n\t\t\t\t<div class=\"name\">\n\t\t\t\t\t<input type=\"radio\" class=\"mal-check\" id=\"mal_${item.slug}\" name=\"mal_id\" value=\"${item.mal_id}\" ${disabled} />\n\t\t\t\t\t<input type=\"radio\" class=\"big-check\" id=\"${item.slug}\" name=\"id\" value=\"${item.id}\" ${disabled} />\n\t\t\t\t\t<label for=\"${item.slug}\">\n\t\t\t\t\t\t<picture width=\"220\">\n\t\t\t\t\t\t\t<source srcset=\"/public/images/${type}/${item.id}.webp\" type=\"image/webp\" />\n\t\t\t\t\t\t\t<source srcset=\"/public/images/${type}/${item.id}.jpg\" type=\"image/jpeg\" />\n\t\t\t\t\t\t\t<img src=\"/public/images/${type}/${item.id}.jpg\" alt=\"\" width=\"220\" />\n\t\t\t\t\t\t</picture>\n\t\t\t\t\t\t<span class=\"name\">\n\t\t\t\t\t\t\t${item.canonicalTitle}<br />\n\t\t\t\t\t\t\t<small>${titles}</small>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"table\">\n\t\t\t\t\t${editLink}\n\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t<span class=\"edit\">\n\t\t\t\t\t\t\t<a class=\"bracketed\" href=\"/${type}/details/${item.slug}\">Info Page</a>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</article>\n\t\t`;\n\t}).join('');\n}","import _ from './anime-client.js'\nimport { renderSearchResults } from './template-helpers.js'\n\nconst search = (query, isCollection = false) => {\n\t// Show the loader\n\t_.show('.cssload-loader');\n\n\t// Do the api search\n\treturn _.get(_.url('/anime-collection/search'), { query }, (searchResults, status) => {\n\t\tsearchResults = JSON.parse(searchResults);\n\n\t\t// Hide the loader\n\t\t_.hide('.cssload-loader');\n\n\t\t// Show the results\n\t\t_.$('#series-list')[ 0 ].innerHTML = renderSearchResults('anime', searchResults, isCollection);\n\t});\n};\n\n// Anime list search\nif (_.hasElement('.anime #search')) {\n\tlet prevRequest = null;\n\n\t_.on('#search', 'input', _.throttle(250, (e) => {\n\t\tconst query = encodeURIComponent(e.target.value);\n\t\tif (query === '') {\n\t\t\treturn;\n\t\t}\n\n\t\tif (prevRequest !== null) {\n\t\t\tprevRequest.abort();\n\t\t}\n\n\t\tprevRequest = search(query);\n\t}));\n}\n\n// Anime collection search\nif (_.hasElement('#search-anime-collection')) {\n\tlet prevRequest = null;\n\n\t_.on('#search-anime-collection', 'input', _.throttle(250, (e) => {\n\t\tconst query = encodeURIComponent(e.target.value);\n\t\tif (query === '') {\n\t\t\treturn;\n\t\t}\n\n\t\tif (prevRequest !== null) {\n\t\t\tprevRequest.abort();\n\t\t}\n\n\t\tprevRequest = search(query, true);\n\t}));\n}\n\n// Action to increment episode count\n_.on('body.anime.list', 'click', '.plus-one', (e) => {\n\tlet parentSel = _.closestParent(e.target, 'article');\n\tlet watchedCount = parseInt(_.$('.completed_number', parentSel)[ 0 ].textContent, 10) || 0;\n\tlet totalCount = parseInt(_.$('.total_number', parentSel)[ 0 ].textContent, 10);\n\tlet title = _.$('.name a', parentSel)[ 0 ].textContent;\n\n\t// Setup the update data\n\tlet data = {\n\t\tid: parentSel.dataset.kitsuId,\n\t\tmal_id: parentSel.dataset.malId,\n\t\tdata: {\n\t\t\tprogress: watchedCount + 1\n\t\t}\n\t};\n\n\t// If the episode count is 0, and incremented,\n\t// change status to currently watching\n\tif (isNaN(watchedCount) || watchedCount === 0) {\n\t\tdata.data.status = 'CURRENT';\n\t}\n\n\t// If you increment at the last episode, mark as completed\n\tif ((!isNaN(watchedCount)) && (watchedCount + 1) === totalCount) {\n\t\tdata.data.status = 'COMPLETED';\n\t}\n\n\t_.show('#loading-shadow');\n\n\t// okay, lets actually make some changes!\n\t_.ajax(_.url('/anime/increment'), {\n\t\tdata,\n\t\tdataType: 'json',\n\t\ttype: 'POST',\n\t\tsuccess: (res) => {\n\t\t\tconst resData = JSON.parse(res);\n\n\t\t\tif (resData.error) {\n\t\t\t\t_.hide('#loading-shadow');\n\t\t\t\t_.showMessage('error', `Failed to update ${title}. `);\n\t\t\t\t_.scrollToTop();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (resData.data.libraryEntry.update.libraryEntry.status === 'COMPLETED') {\n\t\t\t\t_.hide(parentSel);\n\t\t\t}\n\n\t\t\t_.hide('#loading-shadow');\n\n\t\t\t_.showMessage('success', `Successfully updated ${title}`);\n\t\t\t_.$('.completed_number', parentSel)[ 0 ].textContent = ++watchedCount;\n\t\t\t_.scrollToTop();\n\t\t},\n\t\terror: () => {\n\t\t\t_.hide('#loading-shadow');\n\t\t\t_.showMessage('error', `Failed to update ${title}. `);\n\t\t\t_.scrollToTop();\n\t\t}\n\t});\n});","import _ from './anime-client.js'\nimport { renderSearchResults } from './template-helpers.js'\n\nconst search = (query) => {\n\t_.show('.cssload-loader');\n\treturn _.get(_.url('/manga/search'), { query }, (searchResults, status) => {\n\t\tsearchResults = JSON.parse(searchResults);\n\t\t_.hide('.cssload-loader');\n\t\t_.$('#series-list')[ 0 ].innerHTML = renderSearchResults('manga', searchResults);\n\t});\n};\n\nif (_.hasElement('.manga #search')) {\n\tlet prevRequest = null\n\n\t_.on('#search', 'input', _.throttle(250, (e) => {\n\t\tlet query = encodeURIComponent(e.target.value);\n\t\tif (query === '') {\n\t\t\treturn;\n\t\t}\n\n\t\tif (prevRequest !== null) {\n\t\t\tprevRequest.abort();\n\t\t}\n\n\t\tprevRequest = search(query);\n\t}));\n}\n\n/**\n * Javascript for editing manga, if logged in\n */\n_.on('.manga.list', 'click', '.edit-buttons button', (e) => {\n\tlet thisSel = e.target;\n\tlet parentSel = _.closestParent(e.target, 'article');\n\tlet type = thisSel.classList.contains('plus-one-chapter') ? 'chapter' : 'volume';\n\tlet completed = parseInt(_.$(`.${type}s_read`, parentSel)[ 0 ].textContent, 10) || 0;\n\tlet total = parseInt(_.$(`.${type}_count`, parentSel)[ 0 ].textContent, 10);\n\tlet mangaName = _.$('.name', parentSel)[ 0 ].textContent;\n\n\tif (isNaN(completed)) {\n\t\tcompleted = 0;\n\t}\n\n\t// Setup the update data\n\tlet data = {\n\t\tid: parentSel.dataset.kitsuId,\n\t\tmal_id: parentSel.dataset.malId,\n\t\tdata: {\n\t\t\tprogress: completed\n\t\t}\n\t};\n\n\t// If the episode count is 0, and incremented,\n\t// change status to currently reading\n\tif (isNaN(completed) || completed === 0) {\n\t\tdata.data.status = 'CURRENT';\n\t}\n\n\t// If you increment at the last chapter, mark as completed\n\tif ((!isNaN(completed)) && (completed + 1) === total) {\n\t\tdata.data.status = 'COMPLETED';\n\t}\n\n\t// Update the total count\n\tdata.data.progress = ++completed;\n\n\t_.show('#loading-shadow');\n\n\t_.ajax(_.url('/manga/increment'), {\n\t\tdata,\n\t\tdataType: 'json',\n\t\ttype: 'POST',\n\t\tmimeType: 'application/json',\n\t\tsuccess: (res) => {\n\t\t\tconst resData = JSON.parse(res)\n\t\t\tif (resData.error) {\n\t\t\t\t_.hide('#loading-shadow');\n\t\t\t\t_.showMessage('error', `Failed to update ${mangaName}. `);\n\t\t\t\t_.scrollToTop();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (String(data.data.status).toUpperCase() === 'COMPLETED') {\n\t\t\t\t_.hide(parentSel);\n\t\t\t}\n\n\t\t\t_.hide('#loading-shadow');\n\n\t\t\t_.$(`.${type}s_read`, parentSel)[ 0 ].textContent = String(completed);\n\t\t\t_.showMessage('success', `Successfully updated ${mangaName}`);\n\t\t\t_.scrollToTop();\n\t\t},\n\t\terror: () => {\n\t\t\t_.hide('#loading-shadow');\n\t\t\t_.showMessage('error', `Failed to update ${mangaName}`);\n\t\t\t_.scrollToTop();\n\t\t}\n\t});\n});"],"names":[],"mappings":"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"}