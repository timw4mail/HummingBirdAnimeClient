{"version":3,"sources":["/var/www/htdocs/github.timshomepage.net/animeclient/frontEndSrc/js/sw.js","/var/www/htdocs/github.timshomepage.net/animeclient/frontEndSrc/js/anime-client.js","/var/www/htdocs/github.timshomepage.net/animeclient/frontEndSrc/js/events.js","/var/www/htdocs/github.timshomepage.net/animeclient/frontEndSrc/js/session-check.js","/var/www/htdocs/github.timshomepage.net/animeclient/frontEndSrc/js/template-helpers.js","/var/www/htdocs/github.timshomepage.net/animeclient/frontEndSrc/js/anime.js","/var/www/htdocs/github.timshomepage.net/animeclient/frontEndSrc/js/manga.js"],"sourcesContent":["// Start the service worker, if you can\nif ('serviceWorker' in navigator) {\n\tnavigator.serviceWorker.register('/sw.js').then(reg => {\n\t\tconsole.log('Service worker registered', reg.scope);\n\t}).catch(error => {\n\t\tconsole.error('Failed to register service worker', error);\n\t});\n}","// -------------------------------------------------------------------------\n// ! Base\n// -------------------------------------------------------------------------\n\nconst matches = (elm, selector) => {\n\tlet m = (elm.document || elm.ownerDocument).querySelectorAll(selector);\n\tlet i = matches.length;\n\twhile (--i >= 0 && m.item(i) !== elm) {};\n\treturn i > -1;\n}\n\nconst AnimeClient = {\n\t/**\n\t * Placeholder function\n\t */\n\tnoop: () => {},\n\t/**\n\t * DOM selector\n\t *\n\t * @param {string} selector - The dom selector string\n\t * @param {Element} [context]\n\t * @return array of dom elements\n\t */\n\t$(selector, context = null) {\n\t\tif (typeof selector !== 'string') {\n\t\t\treturn selector;\n\t\t}\n\n\t\tcontext = (context !== null && context.nodeType === 1)\n\t\t\t? context\n\t\t\t: document;\n\n\t\tlet elements = [];\n\t\tif (selector.match(/^#([\\w]+$)/)) {\n\t\t\telements.push(document.getElementById(selector.split('#')[1]));\n\t\t} else {\n\t\t\telements = [].slice.apply(context.querySelectorAll(selector));\n\t\t}\n\n\t\treturn elements;\n\t},\n\t/**\n\t * Does the selector exist on the current page?\n\t *\n\t * @param {string} selector\n\t * @returns {boolean}\n\t */\n\thasElement (selector) {\n\t\treturn AnimeClient.$(selector).length > 0;\n\t},\n\t/**\n\t * Scroll to the top of the Page\n\t *\n\t * @return {void}\n\t */\n\tscrollToTop () {\n\t\tconst el = AnimeClient.$('header')[0];\n\t\tel.scrollIntoView(true);\n\t},\n\t/**\n\t * Hide the selected element\n\t *\n\t * @param  {string|Element|Element[]} sel - the selector of the element to hide\n\t * @return {void}\n\t */\n\thide (sel) {\n\t\tif (typeof sel === 'string') {\n\t\t\tsel = AnimeClient.$(sel);\n\t\t}\n\n\t\tif (Array.isArray(sel)) {\n\t\t\tsel.forEach(el => el.setAttribute('hidden', 'hidden'));\n\t\t} else {\n\t\t\tsel.setAttribute('hidden', 'hidden');\n\t\t}\n\t},\n\t/**\n\t * UnHide the selected element\n\t *\n\t * @param  {string|Element|Element[]} sel - the selector of the element to hide\n\t * @return {void}\n\t */\n\tshow (sel) {\n\t\tif (typeof sel === 'string') {\n\t\t\tsel = AnimeClient.$(sel);\n\t\t}\n\n\t\tif (Array.isArray(sel)) {\n\t\t\tsel.forEach(el => el.removeAttribute('hidden'));\n\t\t} else {\n\t\t\tsel.removeAttribute('hidden');\n\t\t}\n\t},\n\t/**\n\t * Display a message box\n\t *\n\t * @param  {string} type - message type: info, error, success\n\t * @param  {string} message - the message itself\n\t * @return {void}\n\t */\n\tshowMessage (type, message) {\n\t\tlet template =\n\t\t\t`<div class='message ${type}'>\n\t\t\t\t<span class='icon'></span>\n\t\t\t\t${message}\n\t\t\t\t<span class='close'></span>\n\t\t\t</div>`;\n\n\t\tlet sel = AnimeClient.$('.message');\n\t\tif (sel[0] !== undefined) {\n\t\t\tsel[0].remove();\n\t\t}\n\n\t\tAnimeClient.$('header')[0].insertAdjacentHTML('beforeend', template);\n\t},\n\t/**\n\t * Finds the closest parent element matching the passed selector\n\t *\n\t * @param  {Element} current - the current Element\n\t * @param  {string} parentSelector - selector for the parent element\n\t * @return {Element|null} - the parent element\n\t */\n\tclosestParent (current, parentSelector) {\n\t\tif (Element.prototype.closest !== undefined) {\n\t\t\treturn current.closest(parentSelector);\n\t\t}\n\n\t\twhile (current !== document.documentElement) {\n\t\t\tif (matches(current, parentSelector)) {\n\t\t\t\treturn current;\n\t\t\t}\n\n\t\t\tcurrent = current.parentElement;\n\t\t}\n\n\t\treturn null;\n\t},\n\t/**\n\t * Generate a full url from a relative path\n\t *\n\t * @param  {string} path - url path\n\t * @return {string} - full url\n\t */\n\turl (path) {\n\t\tlet uri = `//${document.location.host}`;\n\t\turi += (path.charAt(0) === '/') ? path : `/${path}`;\n\n\t\treturn uri;\n\t},\n\t/**\n\t * Throttle execution of a function\n\t *\n\t * @see https://remysharp.com/2010/07/21/throttling-function-calls\n\t * @see https://jsfiddle.net/jonathansampson/m7G64/\n\t * @param {Number} interval - the minimum throttle time in ms\n\t * @param {Function} fn - the function to throttle\n\t * @param {Object} [scope] - the 'this' object for the function\n\t * @return {Function}\n\t */\n\tthrottle (interval, fn, scope) {\n\t\tlet wait = false;\n\t\treturn function (...args) {\n\t\t\tconst context = scope || this;\n\n\t\t\tif ( ! wait) {\n\t\t\t\tfn.apply(context, args);\n\t\t\t\twait = true;\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\twait = false;\n\t\t\t\t}, interval);\n\t\t\t}\n\t\t};\n\t},\n};\n\n// -------------------------------------------------------------------------\n// ! Events\n// -------------------------------------------------------------------------\n\nfunction addEvent(sel, event, listener) {\n\t// Recurse!\n\tif (! event.match(/^([\\w\\-]+)$/)) {\n\t\tevent.split(' ').forEach((evt) => {\n\t\t\taddEvent(sel, evt, listener);\n\t\t});\n\t}\n\n\tsel.addEventListener(event, listener, false);\n}\n\nfunction delegateEvent(sel, target, event, listener) {\n\t// Attach the listener to the parent\n\taddEvent(sel, event, (e) => {\n\t\t// Get live version of the target selector\n\t\tAnimeClient.$(target, sel).forEach((element) => {\n\t\t\tif(e.target == element) {\n\t\t\t\tlistener.call(element, e);\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Add an event listener\n *\n * @param  {string|Element} sel - the parent selector to bind to\n * @param  {string} event - event name(s) to bind\n * @param  {string|Element|function} target - the element to directly bind the event to\n * @param  {function} [listener] - event listener callback\n * @return {void}\n */\nAnimeClient.on = (sel, event, target, listener) => {\n\tif (listener === undefined) {\n\t\tlistener = target;\n\t\tAnimeClient.$(sel).forEach((el) => {\n\t\t\taddEvent(el, event, listener);\n\t\t});\n\t} else {\n\t\tAnimeClient.$(sel).forEach((el) => {\n\t\t\tdelegateEvent(el, target, event, listener);\n\t\t});\n\t}\n};\n\n// -------------------------------------------------------------------------\n// ! Ajax\n// -------------------------------------------------------------------------\n\n/**\n * Url encoding for non-get requests\n *\n * @param data\n * @returns {string}\n * @private\n */\nfunction ajaxSerialize(data) {\n\tlet pairs = [];\n\n\tObject.keys(data).forEach((name) => {\n\t\tlet value = data[name].toString();\n\n\t\tname = encodeURIComponent(name);\n\t\tvalue = encodeURIComponent(value);\n\n\t\tpairs.push(`${name}=${value}`);\n\t});\n\n\treturn pairs.join('&');\n}\n\n/**\n * Make an ajax request\n *\n * Config:{\n * \tdata: // data to send with the request\n * \ttype: // http verb of the request, defaults to GET\n * \tsuccess: // success callback\n * \terror: // error callback\n * }\n *\n * @param  {string} url - the url to request\n * @param  {Object} config  - the configuration object\n * @return {XMLHttpRequest}\n */\nAnimeClient.ajax = (url, config) => {\n\t// Set some sane defaults\n\tconst defaultConfig = {\n\t\tdata: {},\n\t\ttype: 'GET',\n\t\tdataType: '',\n\t\tsuccess: AnimeClient.noop,\n\t\tmimeType: 'application/x-www-form-urlencoded',\n\t\terror: AnimeClient.noop\n\t}\n\n\tconfig = {\n\t\t...defaultConfig,\n\t\t...config,\n\t}\n\n\tlet request = new XMLHttpRequest();\n\tlet method = String(config.type).toUpperCase();\n\n\tif (method === 'GET') {\n\t\turl += (url.match(/\\?/))\n\t\t\t? ajaxSerialize(config.data)\n\t\t\t: `?${ajaxSerialize(config.data)}`;\n\t}\n\n\trequest.open(method, url);\n\n\trequest.onreadystatechange = () => {\n\t\tif (request.readyState === 4) {\n\t\t\tlet responseText = '';\n\n\t\t\tif (request.responseType === 'json') {\n\t\t\t\tresponseText = JSON.parse(request.responseText);\n\t\t\t} else {\n\t\t\t\tresponseText = request.responseText;\n\t\t\t}\n\n\t\t\tif (request.status > 299) {\n\t\t\t\tconfig.error.call(null, request.status, responseText, request.response);\n\t\t\t} else {\n\t\t\t\tconfig.success.call(null, responseText, request.status);\n\t\t\t}\n\t\t}\n\t};\n\n\tif (config.dataType === 'json') {\n\t\tconfig.data = JSON.stringify(config.data);\n\t\tconfig.mimeType = 'application/json';\n\t} else {\n\t\tconfig.data = ajaxSerialize(config.data);\n\t}\n\n\trequest.setRequestHeader('Content-Type', config.mimeType);\n\n\tif (method === 'GET') {\n\t\trequest.send(null);\n\t} else {\n\t\trequest.send(config.data);\n\t}\n\n\treturn request\n};\n\n/**\n * Do a get request\n *\n * @param {string} url\n * @param {object|function} data\n * @param {function} [callback]\n * @return {XMLHttpRequest}\n */\nAnimeClient.get = (url, data, callback = null) => {\n\tif (callback === null) {\n\t\tcallback = data;\n\t\tdata = {};\n\t}\n\n\treturn AnimeClient.ajax(url, {\n\t\tdata,\n\t\tsuccess: callback\n\t});\n};\n\n// -------------------------------------------------------------------------\n// Export\n// -------------------------------------------------------------------------\n\nexport default AnimeClient;","import _ from './anime-client.js';\n\n// ----------------------------------------------------------------------------\n// Event subscriptions\n// ----------------------------------------------------------------------------\n_.on('header', 'click', '.message', hide);\n_.on('form.js-delete', 'submit', confirmDelete);\n_.on('.js-clear-cache', 'click', clearAPICache);\n_.on('.vertical-tabs input', 'change', scrollToSection);\n_.on('.media-filter', 'input', filterMedia);\n\n// ----------------------------------------------------------------------------\n// Handler functions\n// ----------------------------------------------------------------------------\n\n/**\n * Hide the html element attached to the event\n *\n * @param {MouseEvent} event\n * @return void\n */\nfunction hide (event) {\n\t_.hide(event.target)\n}\n\n/**\n * Confirm deletion of an item\n *\n * @param {MouseEvent} event\n * @return void\n */\nfunction confirmDelete (event) {\n\tconst proceed = confirm('Are you ABSOLUTELY SURE you want to delete this item?');\n\n\tif (proceed === false) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t}\n}\n\n/**\n * Clear the API cache, and show a message if the cache is cleared\n *\n * @return void\n */\nfunction clearAPICache () {\n\t_.get('/cache_purge', () => {\n\t\t_.showMessage('success', 'Successfully purged api cache');\n\t});\n}\n\n/**\n * Scroll to the accordion/vertical tab section just opened\n *\n * @param {InputEvent} event\n * @return void\n */\nfunction scrollToSection (event) {\n\tconst el = event.currentTarget.parentElement;\n\tconst rect = el.getBoundingClientRect();\n\n\tconst top = rect.top + window.pageYOffset;\n\n\twindow.scrollTo({\n\t\ttop,\n\t\tbehavior: 'smooth',\n\t});\n}\n\n/**\n * Filter an anime or manga list\n *\n * @param {InputEvent} event\n * @return void\n */\nfunction filterMedia (event) {\n\tconst rawFilter = event.target.value;\n\tconst filter = new RegExp(rawFilter, 'i');\n\n\t// console.log('Filtering items by: ', filter);\n\n\tif (rawFilter !== '') {\n\t\t// Filter the cover view\n\t\t_.$('article.media').forEach(article => {\n\t\t\tconst titleLink = _.$('.name a', article)[0];\n\t\t\tconst title = String(titleLink.textContent).trim();\n\t\t\tif ( ! filter.test(title)) {\n\t\t\t\t_.hide(article);\n\t\t\t} else {\n\t\t\t\t_.show(article);\n\t\t\t}\n\t\t});\n\n\t\t// Filter the list view\n\t\t_.$('table.media-wrap tbody tr').forEach(tr => {\n\t\t\tconst titleCell = _.$('td.align-left', tr)[0];\n\t\t\tconst titleLink = _.$('a', titleCell)[0];\n\t\t\tconst linkTitle = String(titleLink.textContent).trim();\n\t\t\tconst textTitle = String(titleCell.textContent).trim();\n\t\t\tif ( ! (filter.test(linkTitle) || filter.test(textTitle))) {\n\t\t\t\t_.hide(tr);\n\t\t\t} else {\n\t\t\t\t_.show(tr);\n\t\t\t}\n\t\t});\n\t} else {\n\t\t_.show('article.media');\n\t\t_.show('table.media-wrap tbody tr');\n\t}\n}\n","import _ from './anime-client.js';\n\n(() => {\n\tlet hidden = null;\n\tlet visibilityChange = null;\n\n\tif (typeof document.hidden !== \"undefined\") {\n\t\thidden = \"hidden\";\n\t\tvisibilityChange = \"visibilitychange\";\n\t} else if (typeof document.msHidden !== \"undefined\") {\n\t\thidden = \"msHidden\";\n\t\tvisibilityChange = \"msvisibilitychange\";\n\t} else if (typeof document.webkitHidden !== \"undefined\") {\n\t\thidden = \"webkitHidden\";\n\t\tvisibilityChange = \"webkitvisibilitychange\";\n\t}\n\n\tfunction handleVisibilityChange() {\n\t\t// Check the user's session to see if they are currently logged-in\n\t\t// when the page becomes visible\n\t\tif ( ! document[hidden]) {\n\t\t\t_.get('/heartbeat', (beat) => {\n\t\t\t\tconst status = JSON.parse(beat)\n\n\t\t\t\t// If the session is expired, immediately reload so that\n\t\t\t\t// you can't attempt to do an action that requires authentication\n\t\t\t\tif (status.hasAuth !== true) {\n\t\t\t\t\tdocument.removeEventListener(visibilityChange, handleVisibilityChange, false);\n\t\t\t\t\tlocation.reload();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tif (hidden === null) {\n\t\tconsole.info('Page visibility API not supported, JS session check will not work');\n\t} else {\n\t\tdocument.addEventListener(visibilityChange, handleVisibilityChange, false);\n\t}\n})();","import _ from './anime-client.js';\n\n// Click on hidden MAL checkbox so\n// that MAL id is passed\n_.on('main', 'change', '.big-check', (e) => {\n\tconst id = e.target.id;\n\tdocument.getElementById(`mal_${id}`).checked = true;\n});\n\n/**\n * On search results with an existing library entry, this shows that fact, with an edit link for the existing\n * library entry\n *\n * @param {'anime'|'manga'} type\n * @param {Object} item\n * @param isCollection\n * @returns {String}\n */\nfunction renderEditLink (type, item, isCollection = false) {\n\tif (isCollection || item.libraryEntry === null) {\n\t\treturn '';\n\t}\n\n\treturn `\n\t\t<div class=\"row\">\n\t\t\t<span class=\"edit\"><big>[ Already in List ]</big></span>\n\t\t</div>\n\t\t<div class=\"row\">\n\t\t\t<span class=\"edit\">\n\t\t\t\t<a class=\"bracketed\" href=\"/${type}/edit/${item.libraryEntry.id}/${item.libraryEntry.status}\">Edit</a>\n\t\t\t</span>\n\t\t</div>\n\t\t<div class=\"row\"><span class=\"edit\">&nbsp;</span></div>\n\t`\n}\n\n/**\n * Show the search results for a media item\n *\n * @param {'anime'|'manga'} type\n * @param {Object} data\n * @param {boolean} isCollection\n * @returns {String}\n */\nexport function renderSearchResults (type, data, isCollection = false) {\n\treturn data.map(item => {\n\t\tconst titles = item.titles.join('<br />');\n\t\tlet disabled = item.libraryEntry !== null ? 'disabled' : '';\n\t\tconst editLink = renderEditLink(type, item, isCollection);\n\n\t\tif (isCollection) {\n\t\t\tdisabled = '';\n\t\t}\n\n\t\treturn `\n\t\t\t<article class=\"media search ${disabled}\">\n\t\t\t\t<div class=\"name\">\n\t\t\t\t\t<input type=\"radio\" class=\"mal-check\" id=\"mal_${item.slug}\" name=\"mal_id\" value=\"${item.mal_id}\" ${disabled} />\n\t\t\t\t\t<input type=\"radio\" class=\"big-check\" id=\"${item.slug}\" name=\"id\" value=\"${item.id}\" ${disabled} />\n\t\t\t\t\t<label for=\"${item.slug}\">\n\t\t\t\t\t\t<img src=\"${item.coverImage}\" alt=\"\" width=\"220\" />\n\t\t\t\t\t\t<span class=\"name\">\n\t\t\t\t\t\t\t${item.canonicalTitle}<br />\n\t\t\t\t\t\t\t<small>${titles}</small>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"table\">\n\t\t\t\t\t${editLink}\n\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t<span class=\"edit\">\n\t\t\t\t\t\t\t<a class=\"bracketed\" href=\"/${type}/details/${item.slug}\">Info Page</a>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</article>\n\t\t`;\n\t}).join('');\n}","import _ from './anime-client.js'\nimport { renderSearchResults } from './template-helpers.js'\n\nconst search = (query, isCollection = false) => {\n\t// Show the loader\n\t_.show('.cssload-loader');\n\n\t// Do the api search\n\treturn _.get(_.url('/anime-collection/search'), { query }, (searchResults, status) => {\n\t\tsearchResults = JSON.parse(searchResults);\n\n\t\t// Hide the loader\n\t\t_.hide('.cssload-loader');\n\n\t\t// Show the results\n\t\t_.$('#series-list')[ 0 ].innerHTML = renderSearchResults('anime', searchResults, isCollection);\n\t});\n};\n\n// Anime list search\nif (_.hasElement('.anime #search')) {\n\tlet prevRequest = null;\n\n\t_.on('#search', 'input', _.throttle(250, (e) => {\n\t\tconst query = encodeURIComponent(e.target.value);\n\t\tif (query === '') {\n\t\t\treturn;\n\t\t}\n\n\t\tif (prevRequest !== null) {\n\t\t\tprevRequest.abort();\n\t\t}\n\n\t\tprevRequest = search(query);\n\t}));\n}\n\n// Anime collection search\nif (_.hasElement('#search-anime-collection')) {\n\tlet prevRequest = null;\n\n\t_.on('#search-anime-collection', 'input', _.throttle(250, (e) => {\n\t\tconst query = encodeURIComponent(e.target.value);\n\t\tif (query === '') {\n\t\t\treturn;\n\t\t}\n\n\t\tif (prevRequest !== null) {\n\t\t\tprevRequest.abort();\n\t\t}\n\n\t\tprevRequest = search(query, true);\n\t}));\n}\n\n// Action to increment episode count\n_.on('body.anime.list', 'click', '.plus-one', (e) => {\n\tlet parentSel = _.closestParent(e.target, 'article');\n\tlet watchedCount = parseInt(_.$('.completed_number', parentSel)[ 0 ].textContent, 10) || 0;\n\tlet totalCount = parseInt(_.$('.total_number', parentSel)[ 0 ].textContent, 10);\n\tlet title = _.$('.name a', parentSel)[ 0 ].textContent;\n\n\t// Setup the update data\n\tlet data = {\n\t\tid: parentSel.dataset.kitsuId,\n\t\tmal_id: parentSel.dataset.malId,\n\t\tdata: {\n\t\t\tprogress: watchedCount + 1\n\t\t}\n\t};\n\n\t// If the episode count is 0, and incremented,\n\t// change status to currently watching\n\tif (isNaN(watchedCount) || watchedCount === 0) {\n\t\tdata.data.status = 'CURRENT';\n\t}\n\n\t// If you increment at the last episode, mark as completed\n\tif ((!isNaN(watchedCount)) && (watchedCount + 1) === totalCount) {\n\t\tdata.data.status = 'COMPLETED';\n\t}\n\n\t_.show('#loading-shadow');\n\n\t// okay, lets actually make some changes!\n\t_.ajax(_.url('/anime/increment'), {\n\t\tdata,\n\t\tdataType: 'json',\n\t\ttype: 'POST',\n\t\tsuccess: (res) => {\n\t\t\tconst resData = JSON.parse(res);\n\n\t\t\tif (resData.error) {\n\t\t\t\t_.hide('#loading-shadow');\n\t\t\t\t_.showMessage('error', `Failed to update ${title}. `);\n\t\t\t\t_.scrollToTop();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// We've completed the series\n\t\t\tif (resData.data.libraryEntry.update.libraryEntry.status === 'COMPLETED') {\n\t\t\t\t_.hide(parentSel);\n\t\t\t\t_.hide('#loading-shadow');\n\t\t\t\t_.showMessage('success', `Successfully completed ${title}`);\n\t\t\t\t_.scrollToTop();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t_.hide('#loading-shadow');\n\n\t\t\t_.showMessage('success', `Successfully updated ${title}`);\n\t\t\t_.$('.completed_number', parentSel)[ 0 ].textContent = ++watchedCount;\n\t\t\t_.scrollToTop();\n\t\t},\n\t\terror: () => {\n\t\t\t_.hide('#loading-shadow');\n\t\t\t_.showMessage('error', `Failed to update ${title}. `);\n\t\t\t_.scrollToTop();\n\t\t}\n\t});\n});","import _ from './anime-client.js'\nimport { renderSearchResults } from './template-helpers.js'\n\nconst search = (query) => {\n\t_.show('.cssload-loader');\n\treturn _.get(_.url('/manga/search'), { query }, (searchResults, status) => {\n\t\tsearchResults = JSON.parse(searchResults);\n\t\t_.hide('.cssload-loader');\n\t\t_.$('#series-list')[ 0 ].innerHTML = renderSearchResults('manga', searchResults);\n\t});\n};\n\nif (_.hasElement('.manga #search')) {\n\tlet prevRequest = null\n\n\t_.on('#search', 'input', _.throttle(250, (e) => {\n\t\tlet query = encodeURIComponent(e.target.value);\n\t\tif (query === '') {\n\t\t\treturn;\n\t\t}\n\n\t\tif (prevRequest !== null) {\n\t\t\tprevRequest.abort();\n\t\t}\n\n\t\tprevRequest = search(query);\n\t}));\n}\n\n/**\n * Javascript for editing manga, if logged in\n */\n_.on('.manga.list', 'click', '.edit-buttons button', (e) => {\n\tlet thisSel = e.target;\n\tlet parentSel = _.closestParent(e.target, 'article');\n\tlet type = thisSel.classList.contains('plus-one-chapter') ? 'chapter' : 'volume';\n\tlet completed = parseInt(_.$(`.${type}s_read`, parentSel)[ 0 ].textContent, 10) || 0;\n\tlet total = parseInt(_.$(`.${type}_count`, parentSel)[ 0 ].textContent, 10);\n\tlet mangaName = _.$('.name', parentSel)[ 0 ].textContent;\n\n\tif (isNaN(completed)) {\n\t\tcompleted = 0;\n\t}\n\n\t// Setup the update data\n\tlet data = {\n\t\tid: parentSel.dataset.kitsuId,\n\t\tmal_id: parentSel.dataset.malId,\n\t\tdata: {\n\t\t\tprogress: completed\n\t\t}\n\t};\n\n\t// If the episode count is 0, and incremented,\n\t// change status to currently reading\n\tif (isNaN(completed) || completed === 0) {\n\t\tdata.data.status = 'CURRENT';\n\t}\n\n\t// If you increment at the last chapter, mark as completed\n\tif ((!isNaN(completed)) && (completed + 1) === total) {\n\t\tdata.data.status = 'COMPLETED';\n\t}\n\n\t// Update the total count\n\tdata.data.progress = ++completed;\n\n\t_.show('#loading-shadow');\n\n\t_.ajax(_.url('/manga/increment'), {\n\t\tdata,\n\t\tdataType: 'json',\n\t\ttype: 'POST',\n\t\tmimeType: 'application/json',\n\t\tsuccess: (res) => {\n\t\t\tconst resData = JSON.parse(res)\n\t\t\tif (resData.error) {\n\t\t\t\t_.hide('#loading-shadow');\n\t\t\t\t_.showMessage('error', `Failed to update ${mangaName}. `);\n\t\t\t\t_.scrollToTop();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (String(data.data.status).toUpperCase() === 'COMPLETED') {\n\t\t\t\t_.hide(parentSel);\n\t\t\t\t_.hide('#loading-shadow');\n\t\t\t\t_.showMessage('success', `Successfully completed ${mangaName}`);\n\t\t\t\t_.scrollToTop();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t_.hide('#loading-shadow');\n\n\t\t\t_.$(`.${type}s_read`, parentSel)[ 0 ].textContent = String(completed);\n\t\t\t_.showMessage('success', `Successfully updated ${mangaName}`);\n\t\t\t_.scrollToTop();\n\t\t},\n\t\terror: () => {\n\t\t\t_.hide('#loading-shadow');\n\t\t\t_.showMessage('error', `Failed to update ${mangaName}`);\n\t\t\t_.scrollToTop();\n\t\t}\n\t});\n});"],"names":[],"mappings":"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"}